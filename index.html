<div id="sidebar">
    <section>
      <h3>Kameravy</h3>
      <button id="toggleMode" class="btn-main">Växla till 2D-vy</button>
    </section>

    <section>
      <h3>Kartlager</h3>
      <div class="control-item">
        <span>Gånganalys</span>
        <label class="switch"><input type="checkbox" id="layerZones" checked><span class="slider"></span></label>
      </div>
      <div class="control-item">
        <span>Lekparker</span>
        <label class="switch"><input type="checkbox" id="layerParks" checked><span class="slider"></span></label>
      </div>
      <div class="control-item">
        <span>3D Byggnader</span>
        <label class="switch"><input type="checkbox" id="layerBuildings"><span class="slider"></span></label>
      </div>
    </section>

    </div>

<script>
  require([
    "esri/Map",
    "esri/views/SceneView",
    "esri/layers/GeoJSONLayer",
    "esri/layers/OSMBuildingsLayer", // Lade till denna för framtida bruk
    "esri/core/reactiveUtils"
  ], function(Map, SceneView, GeoJSONLayer, OSMBuildingsLayer, reactiveUtils) {

    // 1. Ditt befintliga lager för Gånganalys
    const geojsonLayer = new GeoJSONLayer({
      url: "https://raw.githubusercontent.com/jacobm0810-collab/urban-viewer/main/Polygons_FeaturesToJSON.geojson",
      renderer: {
        type: "unique-value",
        field: "Name",
        uniqueValueInfos: [
          { value: "0 - 5", symbol: { type: "simple-fill", color: [74, 222, 128, 0.6], outline: { color: "white", width: 1 } } },
          { value: "5 - 10", symbol: { type: "simple-fill", color: [250, 204, 21, 0.6], outline: { color: "white", width: 1 } } },
          { value: "10 - 15", symbol: { type: "simple-fill", color: [248, 113, 113, 0.6], outline: { color: "white", width: 1 } } }
        ]
      }
    });

    // 2. NYTT LAGER FÖR LEKPARKER
    const lekparkLayer = new GeoJSONLayer({
      url: "https://raw.githubusercontent.com/jacobm0810-collab/urban-viewer/main/Polygons_FeaturesToJSONlekpark.geojson",
      renderer: {
        type: "simple",
        symbol: {
          type: "simple-marker", // Eftersom din fil innehåller punkter
          color: "blue",
          size: "10px",
          outline: { color: "white", width: 1 }
        }
      }
    });

    const buildingsLayer = new OSMBuildingsLayer({ visible: false });

    const map = new Map({
      basemap: "hybrid",
      ground: "world-elevation",
      layers: [geojsonLayer, lekparkLayer, buildingsLayer] // Lägg till lekparkLayer här
    });

    const view = new SceneView({
      container: "viewDiv",
      map: map,
      camera: { position: { longitude: 14.261, latitude: 57.781, z: 1500 }, tilt: 50 }
    });

    // --- LOGIK FÖR ATT STÄNGA AV/PÅ ---
    
    // Gånganalys (din gamla)
    document.getElementById("layerZones").addEventListener("change", (e) => { 
      geojsonLayer.visible = e.target.checked; 
    });

    // Lekparker (NY)
    document.getElementById("layerParks").addEventListener("change", (e) => { 
      lekparkLayer.visible = e.target.checked; 
    });

    // 3D Byggnader
    document.getElementById("layerBuildings").addEventListener("change", (e) => {
      buildingsLayer.visible = e.target.checked;
    });

    // ... (Resten av din väder- och kamerakod)
  });
</script>
