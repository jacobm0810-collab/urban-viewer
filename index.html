<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Urban Management | Öxnehaga Analysis</title>
  <link rel="stylesheet" href="https://js.arcgis.com/4.29/esri/themes/dark/main.css">
  <script src="https://js.arcgis.com/4.29/"></script>

  <style>
    :root { --bg-dark: #0f172a; --accent: #38bdf8; }
    html, body { margin: 0; padding: 0; height: 100%; width: 100%; font-family: sans-serif; background: var(--bg-dark); color: white; overflow: hidden; }
    header { height: 60px; background: var(--bg-dark); display: flex; align-items: center; justify-content: space-between; padding: 0 30px; border-bottom: 1px solid #334155; }
    .logo { font-weight: 800; color: var(--accent); text-transform: uppercase; }
    #app { height: calc(100% - 60px); position: relative; }
    #viewDiv { height: 100%; width: 100%; }
    .overlay { position: absolute; top: 20px; right: 20px; width: 250px; background: rgba(30, 41, 59, 0.9); backdrop-filter: blur(10px); padding: 15px; border-radius: 12px; border: 1px solid #475569; }
    .legend-item { display: flex; align-items: center; margin-top: 5px; font-size: 12px; }
    .color-box { width: 15px; height: 15px; margin-right: 10px; border-radius: 3px; }
  </style>
</head>

<body>

<header>
  <div class="logo">Urban Management | Öxnehaga</div>
</header>

<div id="app">
  <div id="viewDiv"></div>
  <div class="overlay">
    <h4 style="margin:0 0 10px 0">Gångavstånd (min)</h4>
    <div class="legend-item"><div class="color-box" style="background: #4ade80;"></div> 0 - 5 min</div>
    <div class="legend-item"><div class="color-box" style="background: #facc15;"></div> 5 - 10 min</div>
    <div class="legend-item"><div class="color-box" style="background: #f87171;"></div> 10 - 15 min</div>
  </div>
</div>

<script>
  require([
    "esri/Map",
    "esri/views/SceneView",
    "esri/layers/GeoJSONLayer"
  ], function(Map, SceneView, GeoJSONLayer) {

    // 1. Definiera hur zonerna ska se ut baserat på namnet i din fil
    const renderer = {
      type: "unique-value",
      field: "Name", // Tar värdet från din geojson (t.ex. "0 - 5")
      uniqueValueInfos: [
        { value: "0 - 5", symbol: { type: "simple-fill", color: [74, 222, 128, 0.5], outline: { color: "white", width: 1 } } },
        { value: "5 - 10", symbol: { type: "simple-fill", color: [250, 204, 21, 0.5], outline: { color: "white", width: 1 } } },
        { value: "10 - 15", symbol: { type: "simple-fill", color: [248, 113, 113, 0.5], outline: { color: "white", width: 1 } } }
      ]
    };

    // 2. Skapa lagret från din exporterade fil
    const geojsonLayer = new GeoJSONLayer({
      url: "./Polygons_FeaturesToJSON.geojson",
      renderer: renderer,
      popupTemplate: {
        title: "Resezon: {Name} minuter",
        content: "Detta område ligger inom {Name} minuters gångavstånd."
      }
    });

    const map = new Map({
      basemap: "arcgis-topographic",
      layers: [geojsonLayer]
    });

    const view = new SceneView({
      container: "viewDiv",
      map: map,
      camera: {
        position: {
          longitude: 14.261, // Centrerat på Öxnehaga
          latitude: 57.781,
          z: 2000
        },
        tilt: 45
      }
    });
  });
</script>
</body>
</html>
