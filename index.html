<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Urban Management | Digital Twin</title>

  <link rel="stylesheet" href="https://js.arcgis.com/4.29/esri/themes/light/main.css">
  <script src="https://js.arcgis.com/4.29/"></script>

  <style>
    html, body { margin: 0; padding: 0; height: 100%; width: 100%; font-family: sans-serif; background: #f1f5f9; overflow: hidden; }
    header { height: 60px; background: white; display: flex; align-items: center; justify-content: space-between; padding: 0 30px; border-bottom: 2px solid #e2e8f0; z-index: 100; }
    .logo { font-weight: 800; text-transform: uppercase; }
    #main-wrapper { display: flex; height: calc(100% - 60px); width: 100%; }
    #viewDiv { flex: 1; height: 100%; background: #dee2e6; }
    #sidebar { width: 300px; background: white; border-left: 2px solid #e2e8f0; padding: 20px; display: flex; flex-direction: column; gap: 20px; }
    .btn-main { width: 100%; padding: 12px; background: #0f172a; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; }
    h3 { font-size: 0.75rem; text-transform: uppercase; color: #64748b; margin: 0; border-bottom: 1px solid #e2e8f0; padding-bottom: 8px; }
  </style>
</head>

<body>

<header>
  <div class="logo">Urban Management</div>
  <div id="status" style="text-align: right; font-size: 0.8rem;">
    <b id="city-label">Jönköping, SE</b><br>
    <span id="weather-label" style="color: #0284c7">Ansluter till karta...</span>
  </div>
</header>

<div id="main-wrapper">
  <div id="viewDiv"></div>
  <div id="sidebar">
    <section>
      <h3>Kameravy</h3>
      <button id="viewBtn" class="btn-main">Växla till 2D</button>
    </section>
    <section>
      <h3>Lager</h3>
      <p style="font-size: 0.8rem; color: #64748b;">3D Byggnader och Gångzoner laddas automatiskt.</p>
    </section>
  </div>
</div>

<script>
  // Körs när sidan laddats helt
  window.addEventListener('load', function() {
    if (typeof require !== 'undefined') {
      require([
        "esri/Map",
        "esri/views/SceneView",
        "esri/layers/GeoJSONLayer",
        "esri/layers/OSMBuildingsLayer"
      ], function(Map, SceneView, GeoJSONLayer, OSMBuildingsLayer) {
